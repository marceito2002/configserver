// Note: this is an example of Build Pipeline Structure. 
// In order to use it you may need to change the directory where the composerHelper jsonfile is located for your project
// Also, you may need to keep updated the version of the cimagic library included at top of this file.
//
// Global composer Helper object
//def ch = composerHelper jsonFile: "ci/services/services.json", debug: 1

pipeline {
  agent any
  

          
  stages {
    stage('Prepare') {
        steps {
			// 1. Necesitaría generar el .jar para copiarlos en el directorio de /ci/consumer, porque el siguiente scrip lo necesitar para levantar docker images.,
			echo ' VA A GENERAR EL JAR'
			sh 'mvn clean package -DskipTests=true'
			
            //script {
                // this start the composer
                // is a blocking call
                // call this BEFORE services usage.
                //ch.start()
            //}
      }
    }

	stage('build') {
		steps {
			sh 'mvn clean package -DskipTests=true'
		}
	}


  }

  

}
